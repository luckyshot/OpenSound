OpenSound={config:{interval:5},msg:function(e,t){"use strict";console.log(e)},status:function(e){"use strict";$.ajax({url:"status/"+encodeURIComponent(localStorage.devicename)}).done(function(e){console.log(e);var t=document.getElementById("audio");console.log(t.src);console.log("file/"+e.song);if(t.src.indexOf(encodeURIComponent(e.song))<0){t.src="file/"+e.song;t.play()}e.status===1?t.play():t.pause();$("#track").html(e.song)})},playlist:function(){"use strict";$.ajax({url:"playlist"}).done(function(e){for(var t in e)$("#playlist").append("<li>"+e[t]+"</li>")})},clients:function(){"use strict";$.ajax({url:"clients/"}).done(function(e){var t=$("#clients>tbody");t.empty();for(var n=0;n<e.length;n++)t.append('<tr><td><i class="ico"></i> '+e[n].name+'</td><td><input type="range" class="device-vol" data-devicename="'+e[n].name+'" min="0" max="100" step="1" value="'+e[n].vol+'"></td><td><input type="checkbox" class="device-status" data-devicename="'+e[n].name+'"'+(e[n].status===1?" checked":"")+"></td></tr>")})},file:function(e){"use strict";$.ajax({url:"file/"+e}).done(function(e){console.log(e)})},browse:function(e){"use strict";$.ajax({url:"browse/"+e}).done(function(e){$("#path").html(e.path);$("#browser").html("<li>..</li>");for(var t in e.files)$("#browser").append("<li>"+e[t]+"</li>")})},add:function(e){"use strict";$.ajax({url:"add/"+e}).done(function(e){e.status===1?this.status():this.msg(e.msg)})},remove:function(e){"use strict";$.ajax({url:"remove/"+e}).done(function(e){e.status===1?this.status():this.msg(e.msg)})},play:function(e){"use strict";$.ajax({url:"play/"+e}).done(function(t){var n=document.getElementById("audio");n.src="/file/"+e;n.play()})},pause:function(){"use strict";audio.pause();$.ajax({url:"pause"}).done(function(e){e.status===1?this.status():this.msg(e.msg)})},pos:function(e){"use strict";$.ajax({url:"pos/"+e}).done(function(e){console.log(e)})},name:function(e){"use strict";localStorage.devicename=e},client:function(e,t){"use strict";$.ajax({url:"client/"+e+"/"+t}).done(function(e){console.log(e)})},clientvol:function(e,t){"use strict";$.ajax({url:"client/"+e+"/vol/"+t}).done(function(e){console.log(e)})},ping:function(){"use strict";$.ajax({url:"ping/"+localStorage.devicename}).done(function(e){e.status===1&&$.ajax({url:"ping2/"+localStorage.devicename}).done(function(e){e.status===1?e.ping:this.msg=e.msg})})}};$("#playlist").on("click","li",function(){OpenSound.play(encodeURIComponent($(this).html()))});$("#clients").on("change","input.device-vol",function(){$(this).data("devicename")===localStorage.devicename&&(document.getElementById("audio").volume=$(this).val()/100);$.ajax({url:"client/"+encodeURIComponent($(this).data("devicename"))+"/vol/"+$(this).val()}).done(function(e){console.log(e)})});$("#clients").on("change","input.device-status",function(){$.ajax({url:"client/"+encodeURIComponent($(this).data("devicename"))+"/"+($(this).prop("checked")?"on":"off")}).done(function(e){console.log(e)})});$("#devicename").on("input paste",function(){OpenSound.name($(this).val())});$("#play").on("click",function(){OpenSound.play()});$("#pause").on("click",function(){OpenSound.pause()});$(document).ready(function(){typeof localStorage.devicename=="undefined"&&(localStorage.devicename="device-"+Math.floor(Math.random()*999+100));$("#devicename").val(localStorage.devicename);OpenSound.playlist();OpenSound.clients();OpenSound.status();var e=setInterval(function(){OpenSound.status()},OpenSound.config.interval*1e3)});